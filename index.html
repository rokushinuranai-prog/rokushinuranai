<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>六神占い｜金碧グラデ＋神紋アニメ＋BGM＋今日の運勢</title>
<meta name="description" content="魂を導く六神（ろくしん）の神獣診断と多占術ポータル。金碧グラデーションの神紋アニメ背景、BGM、無料『今日の運勢』ジェネレーター搭載。">
<style>
  :root{--bg-start:#fdf6e9;--bg-end:#fff;--gold:#b88a2c;--goldDeep:#8d6b1a;--ink:#3c3a37;--card:#fffdf7;--line:#f0e7d3;--accent:#ffcb66;--accent2:#1fb9a3}
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Yu Gothic","Noto Sans JP",Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:linear-gradient(180deg,var(--bg-start),var(--bg-end))}
  #bgCanvas{position:fixed;inset:0;z-index:-1;filter: blur(0.6px) saturate(105%);opacity:.65}
  .container{max-width:1120px;margin:0 auto;padding:24px 16px 80px}
  .hero{padding:56px 16px 32px;text-align:center}
  .logo-ghost{font-size:38px;letter-spacing:.2em;color:#d7caa5;opacity:.55;text-shadow:0 1px 0 #fff}
  .title{font-weight:800;font-size:40px;margin:6px 0 10px;color:var(--gold);text-shadow:0 2px 0 #fff}
  .subtitle{opacity:.85}
  .ctaRow{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:20px}
  .btn{appearance:none;border:1px solid #e6d9be;background:linear-gradient(#fff7e5,#f7e8c9);color:#7c5a16;border-radius:999px;padding:12px 20px;font-weight:700;letter-spacing:.08em;box-shadow:0 3px 0 #e7d7b6, 0 6px 22px rgba(184,138,44,.18);transition:.2s transform,.2s filter}
  .btn:hover{transform:translateY(-1px);filter:brightness(1.04)}
  .btn.primary{background:linear-gradient(#ffe29d,#ffd36d);border-color:#f1c86f}
  h2.section{margin:40px 0 16px;font-weight:900;color:var(--gold);text-shadow:0 2px 0 #fff}
  .grid{display:grid;gap:14px}
  @media(min-width:640px){.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
  @media(min-width:980px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
  .god-card{background:linear-gradient(#fffefb,#fff8e9);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,.04), inset 0 0 0 1px #ffffffa0;position:relative;overflow:hidden}
  .god-card::before{content:"";position:absolute;inset:10px;border-radius:16px;border:1px dashed #eddcbd70;mask:radial-gradient(transparent 28%,#000 30%);opacity:.6}
  .god-name{display:flex;align-items:first baseline;gap:8px;margin-bottom:6px}
  .ruby{font-size:12px;color:#9d8752}
  .kanji{font-family:"Hiragino Mincho ProN","Yu Mincho","Noto Serif JP",serif;font-size:26px;color:#b99334}
  .desc{line-height:1.9}
  .menu-grid{display:grid;gap:12px;margin-top:8px}
  @media(min-width:640px){.menu-grid{grid-template-columns:repeat(2,1fr)}}
  @media(min-width:980px){.menu-grid{grid-template-columns:repeat(4,1fr)}}
  .menu-item{background:linear-gradient(#fffefc,#fff8ea);border:1px solid var(--line);padding:14px 16px;border-radius:14px;text-align:center;font-weight:700;box-shadow:0 4px 18px rgba(0,0,0,.04)}
  .panel{background:#fffdf8;border:1px solid var(--line);border-radius:20px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,.04)}
  label{font-weight:800;color:#7b611f}
  select,input{width:100%;padding:12px 14px;border:1px solid #eadfc8;border-radius:12px;background:#fff}
  .pill{display:inline-flex;align-items:center;gap:.5em;padding:11px 18px;border-radius:999px;color:#6f4e0c;border:1px solid #f2dca9;background:linear-gradient(#fff1c9,#ffe39f)}
  .modal{position:fixed;inset:0;background:rgba(20,16,8,.24);display:none;align-items:center;justify-content:center;padding:16px;z-index:50}
  .modal.active{display:flex}
  .modal .box{max-width:620px;width:100%;background:#fffef9;border:1px solid #efdfc2;border-radius:18px;padding:20px;box-shadow:0 30px 70px rgba(0,0,0,.22)}
  .close{float:right;border:none;background:transparent;font-size:24px}
  footer{margin-top:40px;color:#7c6a45}
  .links{display:flex;gap:18px;flex-wrap:wrap;justify-content:center}
  .audio-toggle{position:fixed;right:14px;bottom:16px;z-index:60;border:none;border-radius:999px;padding:10px 14px;font-weight:800;color:#0d665b;background:linear-gradient(#e8fff6,#d0fbef);border:1px solid #a6ecda;box-shadow:0 10px 30px rgba(8,140,120,.15)}
  .audio-toggle.muted{color:#7b6a3c;background:linear-gradient(#fff3da,#ffe9b5);border:1px solid #f3d79b}
  @media(max-width:360px){.title{font-size:34px}.logo-ghost{font-size:30px}}
</style>
</head>
<body>
<canvas id="bgCanvas" aria-hidden="true"></canvas>

<div class="container">
  <section class="hero" role="banner" aria-label="六神占い ヒーロー">
    <div class="logo-ghost">ろくしんうらない</div>
    <h1 class="title">六神占い</h1>
    <p class="subtitle">魂を導く神獣を見出し、運命と調和する。</p>
    <div class="ctaRow">
      <button class="btn primary" onclick="document.getElementById('diag').scrollIntoView({behavior:'smooth'})">無料診断をはじめる</button>
      <button class="btn" onclick="document.getElementById('about').scrollIntoView({behavior:'smooth'})">六神とは</button>
    </div>
  </section>

  <!-- 六神とは -->
  <section id="about">
    <h2 class="section">六神（<span class="ruby">ろくしん</span>）とは</h2>
    <p>あなたの魂を守り導く六つの神獣。それぞれが異なる「力」と「徳」を司り、人生の方向性を照らします。</p>

    <div class="grid cols-2 cols-3" style="margin-top:14px">
      <article class="god-card"><div class="god-name"><span class="ruby">りゅう</span><span class="kanji">龍</span></div><p class="desc"><b>行動力・守護。</b> 天を駆け、道を切り拓く者。</p></article>
      <article class="god-card"><div class="god-name"><span class="ruby">きりん</span><span class="kanji">麒麟</span></div><p class="desc"><b>調和・正義。</b> 優しさと秩序を司る聖獣。</p></article>
      <article class="god-card"><div class="god-name"><span class="ruby">ほうおう</span><span class="kanji">鳳凰</span></div><p class="desc"><b>再生・繁栄。</b> 希望を灯す再生の象徴。</p></article>
      <article class="god-card"><div class="god-name"><span class="ruby">げんぶ</span><span class="kanji">玄武</span></div><p class="desc"><b>忍耐・安定。</b> 継続と信頼を築く守護者。</p></article>
      <article class="god-card"><div class="god-name"><span class="ruby">はくたく</span><span class="kanji">白澤</span></div><p class="desc"><b>知恵・洞察。</b> 真理を見抜く賢者。</p></article>
      <article class="god-card"><div class="god-name"><span class="ruby">とうてつ</span><span class="kanji">饕餮</span></div><p class="desc"><b>勇気・突破。</b> 恐れを破り前進する戦士。</p></article>
    </div>
  </section>

  <!-- 多占術メニュー（今日の運勢に本機能を接続） -->
  <section style="margin-top:28px">
    <h2 class="section">多占術メニュー</h2>
    <div class="menu-grid">
      <button class="menu-item" onclick="openLite('五行占い','木火土金水の偏りから今の整え方を提案。')">五行占い</button>
      <button class="menu-item" onclick="openLite('星宿占い','生まれ星で性質と相性のヒントを提示。')">星宿占い</button>
      <button class="menu-item" onclick="openToday()">今日の運勢（無料）</button>
      <button class="menu-item" onclick="openLite('金運占い','巡りと使い方の整えポイント。')">金運占い</button>
      <button class="menu-item" onclick="openLite('恋愛占い','想いの温度と動かし方。')">恋愛占い</button>
      <button class="menu-item" onclick="openLite('相性占い','関係性の強みと注意点。')">相性占い</button>
      <button class="menu-item" onclick="openLite('健康運','体調の波と整える養生。')">健康運</button>
      <button class="menu-item" onclick="openLite('仕事運','成果が出る動き方。')">仕事運</button>
      <button class="menu-item" onclick="openLite('開運鑑定','今週の波に乗る鍵。')">開運鑑定</button>
    </div>
  </section>

  <!-- 診断 -->
  <section id="diag" style="margin-top:28px">
    <h2 class="section">六神診断（<span class="ruby">ろくしんしんだん</span>）</h2>
    <div class="panel">
      <div style="display:grid;gap:14px">
        <div><label for="q1">① 今の自分に最も近いテーマ</label>
          <select id="q1">
            <option>行動と突破</option><option>人との調和</option><option>変化と再生</option>
            <option>安定と継続</option><option>考察と真理</option><option>挑戦と胆力</option>
          </select></div>
        <div><label for="q2">② 今週の雰囲気</label>
          <select id="q2">
            <option>変化を感じている</option><option>流れを整えたい</option><option>基盤を固めたい</option>
            <option>新しい挑戦がある</option><option>学びや気付きが多い</option><option>勢いを出したい</option>
          </select></div>
        <div><label for="name">ニックネーム（任意・保存用）</label><input id="name" type="text" placeholder="例）お名前"></div>
        <div style="text-align:center"><button class="pill" onclick="diagnose()">結果を見る</button></div>
        <small style="opacity:.7">※入力情報は結果表示のみに使用し、保存はしません。</small>
      </div>
    </div>
  </section>

  <!-- 運営 -->
  <section style="margin-top:28px">
    <h2 class="section">運営・ポリシー</h2>
    <div class="panel" style="display:grid;gap:12px">
      <details open><summary><b>プライバシーポリシー（要約）</b></summary>入力情報は結果表示のみに使用し、第三者提供は行いません。決済導入時は外部サービス（Stripe等）にて処理します。</details>
      <details><summary><b>利用規約（要約）</b></summary>占い結果は助言であり、成果の保証は行いません。不適切な利用・公序良俗に反する行為は禁止します。</details>
    </div>
  </section>

  <footer>
    <p style="text-align:center;margin:26px 0 8px;">© 六神占い — ROKUSHIN FORTUNE.</p>
    <div class="links">
      <a href="#!" onclick="openLite('プライバシー','上記の要約をご確認ください。')">プライバシー</a>
      <a href="#!" onclick="openLite('利用規約','上記の要約をご確認ください。')">利用規約</a>
      <a href="#about">六神とは</a>
    </div>
  </footer>
</div>

<!-- BGM -->
<audio id="bgm" loop preload="auto">
  <source src="https://cdn.jsdelivr.net/gh/naptests/stock-audio@main/mellow-ambient-16s.mp3" type="audio/mpeg">
</audio>
<button id="audioBtn" class="audio-toggle muted" aria-pressed="false" aria-label="BGMの切替">♪ 音をON</button>

<!-- モーダル -->
<div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="box">
    <button class="close" aria-label="閉じる" onclick="closeModal()">×</button>
    <h3 id="modalTitle" style="margin-top:0;color:var(--gold)">結果</h3>
    <div id="modalBody" style="line-height:1.9"></div>
  </div>
</div>

<script>
/* 背景：淡い神紋アニメーション */
(function(){
  const c=document.getElementById('bgCanvas'),x=c.getContext('2d');let dpr=Math.max(1,devicePixelRatio||1);
  function R(){c.width=innerWidth*dpr;c.height=innerHeight*dpr;x.setTransform(dpr,0,0,dpr,0,0)}R();addEventListener('resize',R);
  const m=[],pal=['#eedfb6','#e8d59b','#f4e7c8','#e6d9be','#fff6da'];for(let i=0;i<36;i++)m.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:30+Math.random()*120,s:.2+Math.random()*.5,t:Math.random()*6.28,k:['circle','tri','square'][Math.random()*3|0],c:pal[Math.random()*pal.length|0],a:.10+Math.random()*.12});
  (function D(){x.clearRect(0,0,innerWidth,innerHeight);const g=x.createLinearGradient(0,0,0,innerHeight);g.addColorStop(0,'rgba(255,255,255,.85)');g.addColorStop(1,'rgba(255,232,170,.20)');x.fillStyle=g;x.fillRect(0,0,innerWidth,innerHeight);
    m.forEach(o=>{x.save();x.translate(o.x,o.y);x.rotate(o.t);x.globalAlpha=o.a;x.lineWidth=1.2;x.strokeStyle=o.c;
      if(o.k==='circle'){x.beginPath();x.arc(0,0,o.r,0,6.28);x.stroke();x.beginPath();x.arc(0,0,o.r*.6,0,6.28);x.stroke()}
      if(o.k==='tri'){const t=o.r;x.beginPath();x.moveTo(0,-t);x.lineTo(t*.866,t*.5);x.lineTo(-t*.866,t*.5);x.closePath();x.stroke()}
      if(o.k==='square'){const s=o.r*1.2;x.strokeRect(-s/2,-s/2,s,s);x.strokeRect(-s/4,-s/4,s/2,s/2)}
      x.restore();o.y-=o.s*.3;o.t+=0.0015*o.s;if(o.y<-160)o.y=innerHeight+160;});requestAnimationFrame(D)})();
})();

/* 六神診断（体験用） */
function diagnose(){
  const q1=document.getElementById('q1').value, q2=document.getElementById('q2').value, name=(document.getElementById('name').value||'あなた').trim();
  const map={'行動と突破':'龍','人との調和':'麒麟','変化と再生':'鳳凰','安定と継続':'玄武','考察と真理':'白澤','挑戦と胆力':'饕餮'};
  const god=map[q1]||'龍';
  const lines={'龍':'第一歩を踏み出す時。小さく速く始めると流れが掴めます。','麒麟':'信頼を積む行為が吉。挨拶・礼節・整頓で運が開く。','鳳凰':'手放しと再創造。古いルールを一つ外すと再生が加速。','玄武':'足場固め。生活リズムと資源管理に福あり。','白澤':'学びと観察が鍵。記録すると真理が見える。','饕餮':'恐れの壁を破る挑戦を一つ。小さな勝利が連鎖。'};
  openModal(`${name}の守護神は「<b>${god}</b>」。`,`テーマ：<b>${q1}</b>　｜　今週：<b>${q2}</b><br><br>${lines[god]}`);
}

/* モーダル */
function openModal(t,h){modalTitle.innerHTML=t;modalBody.innerHTML=h;modal.classList.add('active')}
function closeModal(){modal.classList.remove('active')}
function openLite(t,txt){openModal(t,txt)}

/* BGM（iOS対策） */
(function(){
  const audio=bgm,btn=audioBtn;let wanted=localStorage.getItem('rokushin_bgm')==='on';
  function setBtn(){if(audio.paused){btn.classList.add('muted');btn.textContent='♪ 音をON';btn.setAttribute('aria-pressed','false')}else{btn.classList.remove('muted');btn.textContent='♪ 音をOFF';btn.setAttribute('aria-pressed','true')}}
  async function tryPlay(){try{await audio.play()}catch(e){} setBtn()}
  btn.addEventListener('click',async()=>{if(audio.paused){wanted=true;localStorage.setItem('rokushin_bgm','on');await tryPlay()}else{audio.pause();wanted=false;localStorage.setItem('rokushin_bgm','off')}setBtn()});
  const first=()=>{if(wanted)tryPlay();removeEventListener('touchstart',first);removeEventListener('click',first)};addEventListener('touchstart',first,{once:true});addEventListener('click',first,{once:true});
  document.addEventListener('visibilitychange',()=>{if(!document.hidden && wanted)tryPlay()}); if(wanted)tryPlay(); else setBtn();
})();

/* =========================
   今日の運勢（無料）ジェネレーター
   ・毎回違う結果を生成
   ・同日の重複を localStorage で回避
   ========================= */
function openToday(){
  const res = generateDaily();
  const html = `
    <div style="font-size:90%;opacity:.8">${res.date} の運勢</div>
    <h3 style="margin:.4em 0 0;color:#b88a2c">${res.headline}</h3>
    <p style="margin:.6em 0 1em">${res.body}</p>
    <div class="panel" style="padding:12px;margin:.6em 0">
      <b>ラッキー：</b>
      色 <b>${res.lucky.color}</b>／方位 <b>${res.lucky.dir}</b>／時間 <b>${res.lucky.time}</b>／
      アイテム <b>${res.lucky.item}</b>／スポット <b>${res.lucky.spot}</b>／数字 <b>${res.lucky.num}</b>
    </div>
    <div class="panel" style="padding:12px;margin:.6em 0"><b>開運アクション：</b>${res.action}</div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
      <button class="btn" onclick="openToday()">もう一度占う</button>
      <button class="btn primary" onclick="closeModal()">閉じる</button>
    </div>`;
  openModal('今日の運勢', html);
}

function generateDaily(){
  // 基本語彙（各20〜30程度。組合せ > 10^9）
  const adj = ['柔らかい','澄んだ','快活な','静かな','凛とした','のびやかな','芯の強い','瑞々しい','情熱的な','余白のある','誠実な','軽やかな','真摯な','冒険的な','緻密な','直感的な','躍動する','穏やかな','粘り強い','清々しい','素直な','遊び心ある','粋な','上向きの','温かな','端正な','大胆な','しなやかな','静謐な','爽やかな'];
  const theme = ['始動','調整','刷新','定着','学び','飛躍','交流','選別','開拓','整頓','発信','発見','回復','熟成','挑戦','休息','統合','深化','拡張','切替'];
  const effect = ['道が開ける','助力が集まる','誤差が整う','良縁が寄る','ひらめきが降りる','速度が上がる','流れに乗れる','誤解が解ける','基盤が固まる','運気が底上げされる','成果が芽吹く','古傷が癒える','粘りが報われる','視野が広がる','直観が冴える','出会いが増える'];
  const actions = ['5分で片付く用事を一掃','朝一で連絡を1本送信','財布とカバンを軽量化','古いメモを3つ破棄','水を一杯ゆっくり飲む','歩幅を少しだけ大きく','好きな香りを一吹き','端末の通知を一時ミュート','ToDoを3行だけ書く','背筋を伸ばし深呼吸3回','丁寧なあいさつを先手で','小さな寄付/お礼をする','鏡を拭いて光を入れる','10分だけ単純作業','いつもより2分早く動く','利き手と逆で歯磨き','散歩で空を見上げる','紙に迷いを書き出す','自分を褒める言葉を口にする','お気に入りの曲を1曲だけ再生'];
  const colors = ['金','琥珀','山吹','白','水色','翡翠','藤','紅','藍','銀','若草','橙','桜','群青','墨','桃'];
  const dirs = ['東','西','南','北','東南','西南','東北','西北'];
  const times = ['朝一番','午前','正午ごろ','午後','夕方','夜','深夜','夜明け'];
  const items = ['万年筆','小さな鏡','丸い石','ハンカチ','お気に入りのペン','飴玉','名刺入れ','紙の本','小銭','音楽プレイリスト','お茶','メモ帳','青いインク','香りのハンドクリーム','時計','イヤホン','スニーカー','ストール','ボトルの水','スマホスタンド','ノートPC','カードケース','ポケットティッシュ','手帳','小さなお守り','付箋','ブレスレット','USBメモリ','キーリング','折り畳み傘'];
  const spots = ['自然光の入る場所','静かな角席','本屋','緑の多い道','神社の鳥居付近','高いところ','低いところ','川のそば','交差点の手前','駅のベンチ','公園の東側','お気に入りの店の前','玄関','デスクの左側','窓辺','キッチン','洗面台を磨いた直後','エレベーターホール','階段','ベランダ'];
  const verbs = ['磨く','整える','選ぶ','動かす','温める','削る','並べる','祈る','結ぶ','解く','繋ぐ','満たす','深める','遊ぶ','休む','仕上げる','描く','届ける','学ぶ','信じる'];
  const templates = [
    '【${tone}日】小さな${act1}が合図。${effect1}サイン。${advice1}。',
    '今日は${tone}ムード。${act2}と、${effect2}流れに。${advice2}。',
    '${time}に${act3}と、${effect3}。焦らず${verb1}ほど良い。',
    'キーワードは「${keyword}」。${act4}ことで、${effect4}。',
    '運の入口は${spot}。${act5}と、${effect5}。'
  ];
  // 乱数（強力）・重複回避
  const R = n => (crypto.getRandomValues(new Uint32Array(1))[0]/2**32*n)|0;
  const pick = arr => arr[R(arr.length)];

  // 要素を組み立て
  const tone = pick(adj);
  const effect1 = pick(effect), effect2 = pick(effect), effect3 = pick(effect), effect4 = pick(effect), effect5 = pick(effect);
  const act1 = pick(actions), act2 = pick(actions), act3 = pick(actions), act4 = pick(actions), act5 = pick(actions);
  const verb1 = pick(verbs);
  const time = pick(times);
  const spot = pick(spots);
  const keyword = pick(theme);

  // ラッキー群
  const lucky = {
    color: pick(colors),
    dir: pick(dirs),
    time: pick(times),
    item: pick(items),
    spot: pick(spots),
    num: (R(9)+1)
  };

  // 文生成（複数テンプレからランダムに2〜3本）
  function oneTemp(t){
    return t
      .replace('${tone}',tone)
      .replace('${act1}',act1).replace('${act2}',act2).replace('${act3}',act3).replace('${act4}',act4).replace('${act5}',act5)
      .replace('${effect1}',effect1).replace('${effect2}',effect2).replace('${effect3}',effect3).replace('${effect4}',effect4).replace('${effect5}',effect5)
      .replace('${advice1}',`「${pick(verbs)}」を意識`).replace('${advice2}',`まずは${pick(verbs)}こと`)
      .replace('${time}',time).replace('${verb1}',verb1).replace('${spot}',spot).replace('${keyword}',keyword);
  }
  // シャッフルして2〜3選
  const tps = templates.slice().sort(()=>Math.random()-.5).slice(0, 2 + R(2));
  const body = tps.map(oneTemp).join(' ');

  // 見出し
  const headline = `${tone}波に乗る日。${pick(effect)}。`;

  // 重複チェック（当日）
  const today = new Date(); const dateStr = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;
  const sig = (headline+body+lucky.color+lucky.dir+lucky.time+lucky.item+lucky.spot+lucky.num).split('').reduce((a,c)=>((a<<5)-a)+c.charCodeAt(0)|0,0);
  const key = 'rokushin_daily_'+dateStr;
  let mem = JSON.parse(localStorage.getItem(key) || '[]');

  let retry = 0;
  while(mem.includes(sig) && retry<20){
    // 再生成（一部だけ切替）
    lucky.color = pick(colors); lucky.dir=pick(dirs); lucky.time=pick(times); lucky.item=pick(items); lucky.spot=pick(spots); lucky.num=(R(9)+1);
    const extra = oneTemp(pick(templates));
    const newBody = body + ' ' + extra;
    const newSig = (headline+newBody+lucky.color+lucky.dir+lucky.time+lucky.item+lucky.spot+lucky.num).split('').reduce((a,c)=>((a<<5)-a)+c.charCodeAt(0)|0,0);
    if(!mem.includes(newSig)){ mem.unshift(newSig); localStorage.setItem(key, JSON.stringify(mem.slice(0,50))); return {date: dateStr, headline, body:newBody, lucky, action: pick(actions)}; }
    retry++;
  }
  // 初回 or 既存登録
  if(!mem.includes(sig)){ mem.unshift(sig); localStorage.setItem(key, JSON.stringify(mem.slice(0,50))); }
  return {date: dateStr, headline, body, lucky, action: pick(actions)};
}
</script>
</body>
</html>
